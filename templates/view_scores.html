{% extends "base.html" %} {% block content %}

<!-- Bootstrap Icons -->
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
  rel="stylesheet"
/>

<!-- Animate.css for smooth entry -->
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
/>

<!-- Custom CSS Enhancements -->
<style>
  /* Card container */
  .card {
    border-radius: 1rem;
    transition: all 0.3s ease;
  }

  .card:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
  }

  /* Gradient header */
  .card-header {
    background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
    color: #fff;
    border-top-left-radius: 1rem;
    border-top-right-radius: 1rem;
  }

  .card-header h2 {
    font-weight: 600;
    margin: 0;
  }

  /* Table Styles */
  .table {
    width: 100%;
    table-layout: auto;
  }

  .table thead th {
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-size: 0.9rem;
    border-bottom: none;
    white-space: nowrap;
  }

  .table tbody td {
    white-space: nowrap;
  }

  .table tbody tr:hover {
    background-color: #f8fafc;
    transform: scale(1.01);
    transition: all 0.2s ease;
  }

  .table td.text-primary {
    color: #2563eb !important;
  }

  /* Responsive title */
  @media (max-width: 768px) {
    .card-header h2 {
      font-size: 1.2rem;
    }
  }
</style>

<!-- Page Content -->
<div class="container-fluid mt-4 animate__animated animate__fadeInUp">
  <div class="card shadow-lg border-0 rounded-4">
    <div class="card-header d-flex align-items-center">
      <i class="bi bi-bar-chart-line fs-3 me-2"></i>
      <h2>All User Scores</h2>
    </div>

    <div class="card-body">
      <p class="text-muted mb-4">
        Every userâ€™s performance across subjects, chapters, and quizzes.
      </p>

      <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
          <thead class="text-white" style="background-color: #1e293b">
            <tr>
              <th>User</th>
              <th>Email</th>
              <th>Subject</th>
              <th>Chapter</th>
              <th>Quiz</th>
              <th>Score</th>
              <th>Date Taken</th>
            </tr>
          </thead>
          <tbody>
            {% for row in scores %}
            <tr>
              <td class="fw-semibold">{{ row.user_name }}</td>
              <td>{{ row.user_email }}</td>
              <td>{{ row.subject_name }}</td>
              <td>{{ row.chapter_name }}</td>
              <td>{{ row.quiz_name }}</td>
              <td class="fw-bold text-primary">
                {{ row.total_scored }}/{{ row.total_questions }}
              </td>
              <td class="text-muted">
                {{ row.timestamp.strftime("%Y-%m-%d %H:%M") if row.timestamp
                else "" }}
              </td>
            </tr>
            {% else %}
            <tr>
              <td colspan="7" class="text-center text-muted py-4">
                No quiz results found yet.
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

{% endblock %}
